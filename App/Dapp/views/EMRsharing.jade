doctype html
html
  head
    title EMR-sharing Dashboard
    link(rel='stylesheet', href='stylesheets/EMRsharing.css')
  body
    header
      nav
        ul
          li.home
            a(href='/EMRsharing') EMR-sharing
          li.link(style='float:right')
            a(href='/createIdentity') Create Identity
          li.link(style='float:right')
            a(href='/login') EMR-sharing-login
          li.link(style='float:right')
            a(href='/userModule') User module
          li.link(style='float:right')
            a(href='/') DID-Dashboard
    main
      .user-info-box
          h2.user-info-title User Information
          p#user-info-message Please Login First.
          .user-info-details
            p.user-info-item
              span.user-info-label UserId: 
              span#userID
            p.user-info-item
              span.user-info-label Role: 
              span#Role Patient/Doctor/Supervisor
      .dashboard
        - for (var i = 0; i < 6; i++)
          - if ( i == 0 )
              .container 
                h2 AccessControl Instance Overview
                p The overview about your EMRsharing.
          - else
              .container 
                h2 Container #{i+1}
                p This is some sample text for Container #{i+1}.
      
    script.
      async function getACL(uid) {
        try {
          const response = await fetch('/EMRsharing/getACL', {
            method: 'POST', // or 'GET', 'PUT', etc.
            headers: {
              'Content-Type': 'application/json',
              // 'Authorization': 'Bearer ' + token // if you use token-based authentication
            },
            body: JSON.stringify({
              userId: uid,
              // ...other data...
            })
          });

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const data = await response.json(); // parse the response as JSON
          console.log('Success:', data);
        } // try 
        catch (error) {
          console.error('Error:', error);
        } // catch
      } // getACL
      const userIdElement = document.getElementById("userID");
      const RoleElement = document.getElementById("Role");
      const userMessageElement = document.getElementById("user-info-message");
      const queryParams = new URLSearchParams(window.location.search);
      // Get the values of the variables from the query parameters
      const userId = queryParams.get('userId');
      const role = queryParams.get('role');
      if (userId)
        userIdElement.textContent = userId ;
      if (role)
        RoleElement.textContent = role ;
      if (role && userId) {
        userMessageElement.textContent = "Please Enjoy!!" ;
        getACL(userId);
      } // if 

      
